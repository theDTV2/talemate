{
  "title": "On Message Set Avatar",
  "id": "abca5ca0-9a7d-4b59-beb3-2a470ffbf090",
  "properties": {
    "event_name": "agent.conversation.generated"
  },
  "x": 0,
  "y": 0,
  "width": 200,
  "height": 100,
  "collapsed": false,
  "inherited": false,
  "registry": "agents/summarizer/onMessageSetAvatar",
  "nodes": {
    "c7b902e2-3aaf-4748-916d-d4e9a2fcf0c6": {
      "title": "GET obj.response",
      "id": "c7b902e2-3aaf-4748-916d-d4e9a2fcf0c6",
      "properties": {
        "attribute": "response"
      },
      "x": 270,
      "y": 276,
      "width": 210,
      "height": 98,
      "collapsed": false,
      "inherited": false,
      "registry": "data/Get",
      "base_type": "core/Node"
    },
    "35097f10-d0eb-472b-beef-29eb1bf59523": {
      "title": "GET obj.character",
      "id": "35097f10-d0eb-472b-beef-29eb1bf59523",
      "properties": {
        "attribute": "character"
      },
      "x": 260,
      "y": 76,
      "width": 210,
      "height": 98,
      "collapsed": false,
      "inherited": false,
      "registry": "data/Get",
      "base_type": "core/Node"
    },
    "dfb5d077-a85e-4f44-ae23-eb58d5a6d2f4": {
      "title": "Determine Character Avatar",
      "id": "dfb5d077-a85e-4f44-ae23-eb58d5a6d2f4",
      "properties": {},
      "x": 600,
      "y": 166,
      "width": 279,
      "height": 126,
      "collapsed": false,
      "inherited": false,
      "registry": "agents/world_state/determineCharacterAvatar",
      "base_type": "core/Graph"
    },
    "58259836-0151-4aa7-b324-3bb773a6cfba": {
      "title": "Event",
      "id": "58259836-0151-4aa7-b324-3bb773a6cfba",
      "properties": {},
      "x": 20,
      "y": 216,
      "width": 140,
      "height": 26,
      "collapsed": false,
      "inherited": false,
      "registry": "event/Event",
      "base_type": "core/Graph"
    },
    "d88a1e6e-d680-4f20-be2f-b6ab0311cac7": {
      "title": "Make Asset Attachment Context",
      "id": "d88a1e6e-d680-4f20-be2f-b6ab0311cac7",
      "properties": {
        "asset_name": "",
        "tags": [],
        "allow_auto_attach": true,
        "allow_override": true,
        "delete_old": false,
        "message_ids": [],
        "scene_cover": false,
        "character_cover": false,
        "override_scene_cover": false,
        "override_character_cover": false,
        "default_avatar": false,
        "current_avatar": false,
        "override_default_avatar": false,
        "override_current_avatar": false
      },
      "x": 270,
      "y": 456,
      "width": 413,
      "height": 650,
      "collapsed": true,
      "inherited": false,
      "registry": "assets/MakeAssetAttachmentContext",
      "base_type": "core/Node"
    },
    "b97d0bc2-6341-41da-94d3-2ae5349418fe": {
      "title": "Worldstate Settings",
      "id": "b97d0bc2-6341-41da-94d3-2ae5349418fe",
      "properties": {},
      "x": 23,
      "y": -179,
      "width": 329,
      "height": 306,
      "collapsed": true,
      "inherited": false,
      "registry": "agents/world_state/Settings",
      "base_type": "core/Node"
    },
    "a027b8c1-1d2b-4779-aa5e-c66c0717cc95": {
      "title": "Compare",
      "id": "a027b8c1-1d2b-4779-aa5e-c66c0717cc95",
      "properties": {
        "operation": "less_equal",
        "tolerance": 0.0001,
        "a": 0,
        "b": 0
      },
      "x": 573,
      "y": -179,
      "width": 210,
      "height": 150,
      "collapsed": false,
      "inherited": false,
      "registry": "data/number/Compare",
      "base_type": "core/Node"
    },
    "eb65e40c-b609-4868-9df2-d85e773801ea": {
      "title": "Stop",
      "id": "eb65e40c-b609-4868-9df2-d85e773801ea",
      "properties": {
        "exception": "StopGraphExecution"
      },
      "x": 1119,
      "y": -179,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "raise/Stop",
      "base_type": "core/Node"
    },
    "c5890db8-5646-41ed-ade3-137d3099fd97": {
      "title": "As Number",
      "id": "c5890db8-5646-41ed-ade3-137d3099fd97",
      "properties": {
        "number_type": "int"
      },
      "x": 300,
      "y": -179,
      "width": 210,
      "height": 58,
      "collapsed": false,
      "inherited": false,
      "registry": "data/number/AsNumber",
      "base_type": "core/Node"
    },
    "e6d43942-eff1-48a9-b1d7-7f95b781ef18": {
      "title": "Switch",
      "id": "e6d43942-eff1-48a9-b1d7-7f95b781ef18",
      "properties": {
        "pass_through": true
      },
      "x": 840,
      "y": -179,
      "width": 210,
      "height": 78,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Switch",
      "base_type": "core/Node"
    },
    "bc8c45f0-9e66-47d8-9dff-f6a131850b61": {
      "title": "Stage -10",
      "id": "bc8c45f0-9e66-47d8-9dff-f6a131850b61",
      "properties": {
        "stage": -10
      },
      "x": 1419,
      "y": -179,
      "width": 210,
      "height": 118,
      "collapsed": false,
      "inherited": false,
      "registry": "core/Stage",
      "base_type": "core/Node"
    }
  },
  "edges": {
    "c7b902e2-3aaf-4748-916d-d4e9a2fcf0c6.value": [
      "dfb5d077-a85e-4f44-ae23-eb58d5a6d2f4.content"
    ],
    "35097f10-d0eb-472b-beef-29eb1bf59523.value": [
      "dfb5d077-a85e-4f44-ae23-eb58d5a6d2f4.state",
      "dfb5d077-a85e-4f44-ae23-eb58d5a6d2f4.character"
    ],
    "58259836-0151-4aa7-b324-3bb773a6cfba.event": [
      "c7b902e2-3aaf-4748-916d-d4e9a2fcf0c6.object",
      "35097f10-d0eb-472b-beef-29eb1bf59523.object"
    ],
    "d88a1e6e-d680-4f20-be2f-b6ab0311cac7.context": [
      "dfb5d077-a85e-4f44-ae23-eb58d5a6d2f4.asset_ctx"
    ],
    "b97d0bc2-6341-41da-94d3-2ae5349418fe.avatars_selection_frequency": [
      "c5890db8-5646-41ed-ade3-137d3099fd97.value"
    ],
    "a027b8c1-1d2b-4779-aa5e-c66c0717cc95.result": [
      "e6d43942-eff1-48a9-b1d7-7f95b781ef18.value"
    ],
    "eb65e40c-b609-4868-9df2-d85e773801ea.state": [
      "bc8c45f0-9e66-47d8-9dff-f6a131850b61.state"
    ],
    "c5890db8-5646-41ed-ade3-137d3099fd97.value": [
      "a027b8c1-1d2b-4779-aa5e-c66c0717cc95.a"
    ],
    "e6d43942-eff1-48a9-b1d7-7f95b781ef18.yes": [
      "eb65e40c-b609-4868-9df2-d85e773801ea.state"
    ]
  },
  "groups": [
    {
      "title": "Validation",
      "x": -2,
      "y": -259,
      "width": 1656,
      "height": 255,
      "color": "#b58b2a",
      "font_size": 24,
      "inherited": false
    },
    {
      "title": "Process",
      "x": -5,
      "y": 1,
      "width": 909,
      "height": 510,
      "color": "#3f789e",
      "font_size": 24,
      "inherited": false
    }
  ],
  "comments": [
    {
      "text": "AI assisted avatar selection toggle check - if disabled, bail early.",
      "x": 30,
      "y": -129,
      "width": 200,
      "inherited": false
    }
  ],
  "extends": null,
  "base_type": "core/Event",
  "inputs": [],
  "outputs": [],
  "module_properties": {},
  "style": {
    "title_color": "#57532e",
    "node_color": "#39382c",
    "icon": "F0BF8",
    "auto_title": null,
    "counterpart": null
  }
}